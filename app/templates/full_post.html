{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}
<!-- got this shit from https://github.com/BlackrockDigital/startbootstrap-blog-post/blob/master/index.html -->
<!-- Page Content -->
{% block app_content %}
<div class="row">
  <!-- Post Content Column -->
  <div class="col-lg-12">
    <!-- Title -->
    <h1 class="mt-4">{{ post.title }}</h1>

    <!-- Author -->
    <p class="lead">
      by
      <a href="{{ url_for('user', username=post.author.username) }}">
        {{ post.author.username }}</a>
    </p>

    <hr>

    <!-- Date/Time -->
    <p>
      Posted on {{ post.timestamp }}
    </p>
    <hr>
    <!-- Post Content -->

    <p class="lead">{{ post.body| safe}}</p>

    <hr>
{% if (current_user.permission|string()).lower() == "teacher" or (current_user.permission|string()).lower() == "admin" %}
    <div class="card my-4">
      <h5 class="card-header">Mark:</h5>
      <div class="card-body" style = "width: 50%">
        {{ wtf.quick_form(form1) }}
      </div>
    </div>
    {% else %}
    <!-- Comments Form -->
    <div class="card my-4">
      <h5 class="card-header">Leave a Comment:</h5>
      <div class="card-body">
        {{ wtf.quick_form(form) }}
      </div>
    </div>
    {% endif %}

    <!-- Single rating -->
    {% for rating in ratings %}
    {% include '_rating.html' %}
    {% endfor %}

    <!-- Single Comment -->
    {% for comment in comments %}
    {% include '_comment.html' %}
    {% endfor %}
  </div>


</div>
<script>
        var elem = document.getElementsByClassName('container')[1].getElementsByTagName('img');
        element = [];
        element.push.apply(element, elem);
        element.forEach(function (item, i, element) {
            var width = item.offsetWidth;
            var height = item.offsetHeight;
            if (width > 1000) {
                item.style.width = '100%';
                item.style.height = '100%';
            }
        });
</script>
{% endblock %}